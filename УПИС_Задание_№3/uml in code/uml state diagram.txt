@startuml
title Diceville: Диаграмма состояний объекта Игрок

[*] --> ПодготовкаКИгре

state ПодготовкаКИгре {
  [*] --> ВыборФракции
  ВыборФракции --> РасстановкаСтартовойЗоны : выбор фракции
}
ПодготовкаКИгре --> ОжиданиеСвоегоХода : начало игры

ОжиданиеСвоегоХода --> АктивныйХод : начало хода
АктивныйХод --> ОжиданиеСвоегоХода : конец хода

state АктивныйХод {
  [*] --> НаборКарт
  НаборКарт --> БросокКубиков : добор до 6 карт
  БросокКубиков --> ПрименениеЭффектов : бросок кубика(ов)
  ПрименениеЭффектов --> ПолучениеОчков : эффекты зданий
  ПолучениеОчков --> ЗаменаКарты : +2 очка действий
  ЗаменаКарты --> ВыполнениеДействий : замена карты (опц.)
  ВыполнениеДействий --> ЗавершениеХода : постройка / покупка клетки / улучшение базы
  ЗавершениеХода --> [*]
}

АктивныйХод --> ПобедаИгрока : все улучшения базы куплены
ОжиданиеСвоегоХода --> ПоражениеИгрока : соперник победил

ПобедаИгрока --> [*]
ПоражениеИгрока --> [*]

@enduml
